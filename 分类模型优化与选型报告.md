## 📋 糖尿病分类模型优化与选型报告

### 摘要

本项目致力于开发一个高准确率和低漏诊率的糖尿病分类模型。经过三轮迭代和对比分析，最终确定使用 **逻辑回归模型（LogReg V2）**，并在分类阈值 T=0.45 处达到最佳性能平衡。该配置实现了最高的准确率 (0.7792) 和优秀的患病召回率 (0.6667)。

------

### 1. 引入独热编码（OHE）的对比效果 

初始的逻辑回归模型 (V1) 仅使用了标准化后的数值特征。通过引入**分类特征（如年龄分组、BMI 分组、怀孕次数分组）** 并对其进行独热编码（OHE），模型性能取得了显著提升。

#### LogReg V1 vs. LogReg V2 (OHE) 对比

| **性能指标**    | **LogReg V1 (仅数值)** | **LogReg V2 (含 OHE)** | **改进幅度** |
| --------------- | ---------------------- | ---------------------- | ------------ |
| **AUC Score**   | 0.8046 3               | **0.8226** 4           | **+0.0180**  |
| **准确率**      | 0.7078 5               | **0.7532** 6           | **+4.54%**   |
| **患病召回率**  | 0.56 (30/54) 7         | 0.59 (32/54) 8         | +3%          |
| **假阴性 (FN)** | 24                     | **22**                 | - 2          |
| **假阳性 (FP)** | 21                     | **16**                 | - 5          |



**结论：** 引入 OHE 特征后，模型能够捕捉到特征的非线性风险关系（如特定年龄段的风险），导致 **AUC、准确率、召回率、F1-score** 全面提升 13。特别是 **假阳性（误诊）** 显著减少，表明模型对非患病人群的识别更加精确 14。



### 2. 朴素贝叶斯 (NB) 与逻辑回归 (LogReg V2) 模型比较

为了寻找在**患病召回率（Recall）** 上表现最优的模型，我们对比了 LogReg V2 模型和 GaussianNB 模型（均包含 OHE 特征）。

#### LogReg V2 vs. GaussianNB 对比

| **性能指标**    | **LogReg V2 (含 OHE)** | **GaussianNB (含 OHE)** | **选型侧重**                   |
| --------------- | ---------------------- | ----------------------- | ------------------------------ |
| **AUC Score**   | **0.8226**             | 0.7917                  | LogReg V2 判别能力更强。       |
| **准确率**      | **0.7532**             | 0.7078                  | LogReg V2 整体预测更准确。     |
| **患病召回率**  | 0.59                   | **0.69**                | NB 漏诊率最低，但 FP 较高 23。 |
| **假阴性 (FN)** | 22                     | **17**                  | NB 漏诊风险最低。              |
| **假阳性 (FP)** | **16**                 | 28                      | LogReg V2 误诊风险最低。       |

**结论：**

- **LogReg V2** 拥有最高的 **AUC 和准确率**，是综合性能最优的模型 28。
- **GaussianNB** 拥有最高的 **患病召回率**，在最小化漏诊（FN=17）方面表现最佳 29。

鉴于 LogReg V2 的 AUC 具有优势，且 FP 风险较低，我们决定在其基础上通过**调整分类阈值**来提升召回率，以期获得一个性能最平衡的最终模型。

------

### 3. 阈值调整与最终选优 

我们对 LogReg V2 模型进行了一系列分类阈值 $\mathbf{T}$ 的测试，目标是降低**假阴性 (FN)**，同时控制**假阳性 (FP)** 的增加。

| **Threshold (T)** | **召回率 (Recall)** | **FN (漏诊)** | **FP (误诊)** | **Precision (精确率)** | **Accuracy** |
| ----------------- | ------------------- | ------------- | ------------- | ---------------------- | ------------ |
| 0.50 (默认)       | 0.5926              | 22            | 16            | 0.6667                 | 0.7532       |
| **0.45 (推荐)**   | **0.6667**          | **18**        | **16**        | **0.6923**             | **0.7792**   |
| 0.40              | 0.7037              | 16            | 24            | 0.6129                 | 0.7403       |
| 0.35              | 0.7593              | 13            | 26            | 0.6119                 | 0.7468       |

**最终决策：**

- **最佳平衡点为 T=0.45** 。
- 在此阈值下，召回率从 0.59 提升到 **0.67** 。
- **关键：** 假阴性 (FN) 降低到 **18**，并且 **假阳性 (FP)** 保持在最低值 **16** 不变 。此外，**准确率**达到最高的 **0.7792** 。

**最终选型结论：** LogReg V2 模型（即 `disease_classifier_ohe_new.pkl` 所代表的模型）配合 T=0.45 的分类阈值，实现了**最高的综合性能和平衡的诊断风险**。